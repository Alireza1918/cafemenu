<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>منوی کافه کاردیتو</title>

<link href="https://docs.google.com/spreadsheets/d/e/2PACX-1vRp_aRQ_XjogTCw1nrzonw8YLUyNuVFO1nviydXbz2sSZOv5Ma16ChADiq5UqqIIx7jAEmltZpUfJ_t/pub?output=csv">

<style>
body{
  font-family: Vazir, sans-serif;
  direction: rtl;
  margin:0;
  padding:0;
  background:#046d44;
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url('logo.png') no-repeat center/420px;
  opacity:1;
  animation:pulse 3s infinite ease-in-out;
  pointer-events:none;
}

@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.1)}
}

.container{
  max-width:900px;
  margin:60px auto;
  background:rgba(90,90,90,.95);
  border-radius:25px;
  padding:40px;
  position:relative;
  z-index:1;
}

h1{
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:60px;
  color:#fff;
  margin-bottom:50px;
}

h1 img{
  height:100px;
  margin-left:25px;
  animation:sparkle 2s infinite;
}

@keyframes sparkle{
  0%,100%{filter:brightness(100%)}
  50%{filter:brightness(160%)}
}

/* ====== ACCORDION ====== */

.category-wrap{
  text-align:right;
  margin-bottom:20px;
}

.category-btn{
  display:inline-block;
  background:#05985f;
  color:#fff;
  padding:18px 30px;
  font-size:28px;
  border-radius:18px;
  cursor:pointer;
  transition:.3s;
}

.category-btn.active{
  background:#fff;
  color:#000;
  border-bottom-left-radius:0;
  border-bottom-right-radius:0;
}

.items{
  max-height:0;
  overflow:hidden;
  background:#05985f;
  transition:max-height .4s ease;
  border-radius:0 18px 18px 18px;
}

.items.active{
  max-height:1000px;
}

.item{
  display:flex;
  justify-content:space-between;
  padding:18px 25px;
  font-size:24px;
  color:#fff;
  border-bottom:1px solid rgba(255,255,255,.2);
}

.item:last-child{border:none}

.price{
  font-weight:bold;
}

small{
  display:block;
  font-size:18px;
  opacity:.9;
}
</style>
</head>

<body>

<div class="container">
  <h1>
    منوی کافه کاردیتو
    <img src="logo.png">
  </h1>

  <div id="menu"></div>
</div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRp_aRQ_XjogTCw1nrzonw8YLUyNuVFO1nviydXbz2sSZOv5Ma16ChADiq5UqqIIx7jAEmltZpUfJ_t/pub?gid=0&single=true&output=csv";

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>{
  const rows = t.split('\n').slice(1).filter(r=>r.trim());
  const data = {};

  rows.forEach(r=>{
    const [cat,name,desc,price,status] = r.split(',').map(x=>x.trim());
    if(status==="on"){
      if(!data[cat]) data[cat]=[];
      data[cat].push({name,desc,price});
    }
  });

  const menu=document.getElementById('menu');

  Object.keys(data).forEach(cat=>{
    const wrap=document.createElement('div');
    wrap.className="category-wrap";

    const btn=document.createElement('div');
    btn.className="category-btn";
    btn.innerText=cat;

    const items=document.createElement('div');
    items.className="items";

    data[cat].forEach(p=>{
      items.innerHTML+=`
        <div class="item">
          <div>
            ${p.name}
            <small>${p.desc}</small>
          </div>
          <div class="price">${p.price}</div>
        </div>`;
    });

    btn.onclick=()=>{
      document.querySelectorAll('.category-btn').forEach(b=>b.classList.remove('active'));
      document.querySelectorAll('.items').forEach(i=>i.classList.remove('active'));

      if(!items.classList.contains('active')){
        btn.classList.add('active');
        items.classList.add('active');
      }
    };

    wrap.appendChild(btn);
    wrap.appendChild(items);
    menu.appendChild(wrap);
  });
});
</script>

</body>
</html>
