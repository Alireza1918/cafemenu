<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>منوی کافه کاردیتو</title>
<link href="https://fonts.googleapis.com/css2?family=Vazir&family=Permanent+Marker&display=swap" rel="stylesheet">

<style>
body{
  font-family:"Vazir",sans-serif;
  direction:rtl;
  margin:0;
  background:#046d44;
}

/* ===== background logo ===== */
.bg-logo{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  z-index:0;
}

.bg-logo img{
  width:320px;
  opacity:0.15;
}

/* ===== container ===== */
.container{
  max-width:900px;
  margin:auto;
  padding:30px;
  background:rgba(100,100,100,0.95);
  border-radius:25px;
  position:relative;
  z-index:2;
  transition:0.3s;
}

.fullscreen{
  max-width:100% !important;
}

/* ===== title ===== */
h1{
  text-align:center;
  font-family:'Permanent Marker',cursive;
  font-size:56px;
  color:#fff;
  margin-bottom:40px;
}

/* ===== tabs ===== */
.tabs-wrapper{
  display:flex;
  justify-content:space-between;
  gap:20px;
}

.tabs{
  width:48%;
  display:flex;
  flex-direction:column;
  gap:15px;
}

.tab{
  background:#05985f;
  color:#fff;
  padding:18px;
  font-size:26px;
  border-radius:14px;
  cursor:pointer;
  transition:0.3s;
}

.tab.active{
  background:#fff;
  color:#000;
}

/* ===== items ===== */
.items{
  display:none;
  background:#fff;
  border-radius:14px;
  margin-top:15px;
  padding:25px;
}

.item{
  display:flex;
  gap:15px;
  padding:15px 0;
}

.item img{
  width:60px;
  height:60px;
  border-radius:10px;
  object-fit:cover;
  background:#ddd;
}

.item-content{
  flex:1;
}

.item-top{
  display:flex;
  align-items:center;
  font-size:24px;
}

.name{
  white-space:nowrap;
}

.dots{
  flex:1;
  border-bottom:2px dotted #999;
  margin:0 10px;
}

.price{
  font-weight:bold;
  white-space:nowrap;
}

.price small{
  font-size:14px;
  margin-right:4px;
}

.desc{
  font-size:18px;
  color:#555;
  margin-top:6px;
}
</style>
</head>

<body>

<!-- background logo -->
<div class="bg-logo">
  <img src="logo.png" alt="logo">
</div>

<div class="container" id="container">
  <h1>منوی کافه کاردیتو</h1>

  <div class="tabs-wrapper">
    <div class="tabs" id="right-tabs"></div>
    <div class="tabs" id="left-tabs"></div>
  </div>
</div>

<script>
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vRp_aRQ_XjogTCw1nrzonw8YLUyNuVFO1nviydXbz2sSZOv5Ma16ChADiq5UqqIIx7jAEmltZpUfJ_t/pub?output=csv";

function safeId(t){
  return t.replace(/\s+/g,'_').replace(/[^\w]/g,'');
}

fetch(CSV_URL)
.then(r=>r.text())
.then(text=>{
  const rows=text.split('\n').slice(1).filter(r=>r.trim());
  const cats={};

  rows.forEach(r=>{
    const [cat,name,desc,price,img,status]=r.split(',').map(c=>c.trim());
    if(status==='on'){
      if(!cats[cat]) cats[cat]=[];
      cats[cat].push({name,desc,price,img});
    }
  });

  const right=document.getElementById('right-tabs');
  const left=document.getElementById('left-tabs');
  const container=document.getElementById('container');
  let side=true;

  Object.keys(cats).forEach(cat=>{
    const id=safeId(cat);

    const tab=document.createElement('div');
    tab.className='tab';
    tab.innerText=cat;

    const items=document.createElement('div');
    items.className='items';
    items.id=id;

    cats[cat].forEach(p=>{
      items.innerHTML+=`
        <div class="item">
          <img src="${p.img || ''}">
          <div class="item-content">
            <div class="item-top">
              <span class="name">${p.name}</span>
              <span class="dots"></span>
              <span class="price">${p.price}<small>تومان</small></span>
            </div>
            <div class="desc">${p.desc}</div>
          </div>
        </div>`;
    });

    tab.onclick=()=>{
      const open = items.style.display === 'block';

      document.querySelectorAll('.items').forEach(i=>i.style.display='none');
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      container.classList.remove('fullscreen');

      if(!open){
        items.style.display='block';
        tab.classList.add('active');
        container.classList.add('fullscreen');
      }
    };

    (side?right:left).appendChild(tab);
    (side?right:left).appendChild(items);
    side=!side;
  });
});
</script>

</body>
</html>
