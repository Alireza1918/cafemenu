<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>منوی کافه کاردیتو</title>
<link href="https://fonts.googleapis.com/css2?family=Vazir&family=Permanent+Marker&display=swap" rel="stylesheet">

<style>
body{
  font-family:"Vazir",sans-serif;
  direction:rtl;
  margin:0;
  background:#046d44;
}

.container{
  max-width:900px;
  margin:auto;
  padding:30px;
  background:rgba(100,100,100,0.95);
  border-radius:25px;
}

h1{
  text-align:center;
  font-family:'Permanent Marker',cursive;
  font-size:62px;
  color:#fff;
  margin-bottom:40px;
}

/* ===== tabs ===== */
.tabs-wrapper{
  display:flex;
  justify-content:space-between;
  gap:20px;
}

.tabs{
  width:48%;
  display:flex;
  flex-direction:column;
  gap:15px;
}

.tab{
  background:#05985f;
  color:#fff;
  padding:18px;
  font-size:26px;
  border-radius:14px;
  cursor:pointer;
  transition:0.3s;
}

.tab.active{
  background:#047a4a;
}

/* ===== items ===== */
.items{
  display:none;
  background:#fff;
  border-radius:14px;
  margin-top:-10px;
  padding:20px;
  animation:slide 0.3s ease;
}

.items.left{ transform-origin:right; }
.items.right{ transform-origin:left; }

@keyframes slide{
  from{ transform:scaleX(0); }
  to{ transform:scaleX(1); }
}

.item{
  display:flex;
  align-items:center;
  font-size:24px;
  padding:12px 0;
}

.name{
  white-space:nowrap;
}

.dots{
  flex:1;
  border-bottom:2px dotted #999;
  margin:0 10px;
}

.price{
  font-weight:bold;
  white-space:nowrap;
}

.price small{
  font-size:14px;
  margin-right:4px;
}
</style>
</head>

<body>
<div class="container">
  <h1>منوی کافه کاردیتو</h1>

  <div class="tabs-wrapper">
    <div class="tabs" id="right-tabs"></div>
    <div class="tabs" id="left-tabs"></div>
  </div>
</div>

<script>
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vRp_aRQ_XjogTCw1nrzonw8YLUyNuVFO1nviydXbz2sSZOv5Ma16ChADiq5UqqIIx7jAEmltZpUfJ_t/pub?output=csv";

function safeId(text){
  return text.replace(/\s+/g,'_').replace(/[^\w]/g,'');
}

function toggle(tab,id){
  document.querySelectorAll('.items').forEach(i=>i.style.display='none');
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));

  tab.classList.add('active');
  document.getElementById(id).style.display='block';
}

fetch(CSV_URL)
.then(r=>r.text())
.then(text=>{
  const rows=text.split('\n').slice(1).filter(r=>r.trim());
  const cats={};

  rows.forEach(r=>{
    const [cat,name,desc,price,img,status]=r.split(',').map(c=>c.trim());
    if(status==='on'){
      if(!cats[cat]) cats[cat]=[];
      cats[cat].push({name,price});
    }
  });

  const right=document.getElementById('right-tabs');
  const left=document.getElementById('left-tabs');
  let side=true;

  Object.keys(cats).forEach(cat=>{
    const id=safeId(cat);
    const tab=document.createElement('div');
    tab.className='tab';
    tab.innerText=cat;

    const items=document.createElement('div');
    items.className='items '+(side?'right':'left');
    items.id=id;

    cats[cat].forEach(p=>{
      items.innerHTML+=`
        <div class="item">
          <span class="name">${p.name}</span>
          <span class="dots"></span>
          <span class="price">${p.price}<small>تومان</small></span>
        </div>`;
    });

    tab.onclick=()=>toggle(tab,id);

    (side?right:left).appendChild(tab);
    (side?right:left).appendChild(items);

    side=!side;
  });
});
</script>
</body>
</html>
